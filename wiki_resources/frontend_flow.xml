<?xml version="1.0" encoding="UTF-8"?>
<mxGraphModel dx="1706" dy="438" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" fold="1" page="1" pageScale="1" pageWidth="826" pageHeight="1169" style="default-style2" math="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="2" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="30" y="20" width="30" height="30" as="geometry"/></mxCell><mxCell id="3" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="2" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="110" as="targetPoint"/></mxGeometry></mxCell><mxCell id="4" value="New Alarm" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="110" width="120" height="40" as="geometry"/></mxCell><mxCell id="5" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="4" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="290" as="targetPoint"/></mxGeometry></mxCell><mxCell id="8" value="&lt;u&gt;WebSocket event&lt;/u&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Alarms&lt;/b&gt;.&lt;i&gt;addAlarm(alarmJson)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- &lt;/i&gt;a = new Alarm(alarmJson) &lt;font color=&quot;#666666&quot;&gt;// Create client side Alarm object&lt;/font&gt;&lt;/div&gt;&lt;div&gt;- &lt;i&gt;buildDOMAlarm(a, callback)&lt;/i&gt;&amp;nbsp;&lt;font color=&quot;#666666&quot;&gt;// Create the list item and provide a callback&lt;/font&gt;&lt;/div&gt;&lt;div&gt;- append DOM object to unassigned alarm list&lt;/div&gt;&lt;div&gt;- update the DOM object's ID&lt;/div&gt;&lt;div&gt;- add click listener that triggers &lt;b&gt;Alarms&lt;/b&gt;.&lt;b&gt;gui&lt;/b&gt;.&lt;i&gt;selectOpenAlarm()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- add alarm to client side cache&lt;/div&gt;&lt;div&gt;- sort the client side cache by arrival time&lt;/div&gt;&lt;div&gt;- &lt;b&gt;Alarms.gui.&lt;/b&gt;&lt;i&gt;resetAlarmCount()&lt;/i&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;" vertex="1" parent="1"><mxGeometry x="160" y="45" width="450" height="170" as="geometry"/></mxCell><mxCell id="14" value="Select Open Alarm" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="290" width="120" height="40" as="geometry"/></mxCell><mxCell id="15" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="14" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="390" as="targetPoint"/></mxGeometry></mxCell><mxCell id="16" value="&lt;u&gt;User triggered&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;br&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Alarms.gui.&lt;/b&gt;&lt;i&gt;selectOpenAlarm(alarmIndex , calleeIndex) &amp;nbsp;&lt;/i&gt;// Triggered by user click&lt;/div&gt;&lt;div&gt;- a =&amp;nbsp;&lt;i&gt;getAlarm(alarmIndex)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- &lt;i&gt;getPastAlarmsFromCallee(calleeIndex)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- show alarm modal&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&amp;nbsp;IF YES&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.assign(alarmIndex)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- &lt;/i&gt;Check if protected (not yours, etc)&lt;/div&gt;&lt;div&gt;&lt;i&gt;- &lt;/i&gt;POST &lt;i&gt;assignAlarmFromJson()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="290" width="450" height="210" as="geometry"/></mxCell><mxCell id="18" value="Assign" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="5" y="390" width="80" height="40" as="geometry"/></mxCell><mxCell id="19" value="NO" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="18" parent="1"><mxGeometry x="0.0588" relative="1" as="geometry"><mxPoint x="-70" y="410" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="20" value="YES" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="18" parent="1"><mxGeometry x="-0.3333" y="15" relative="1" as="geometry"><mxPoint x="45" y="530" as="targetPoint"/><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="21" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-100" y="395" width="30" height="30" as="geometry"/></mxCell><mxCell id="22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" edge="1" parent="1" source="4" target="8"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.095;entryPerimeter=0;" edge="1" parent="1" source="14" target="16"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="24" value="ACTIVE_ALARM.moveToAssigned()" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-60" y="530" width="210" height="40" as="geometry"/></mxCell><mxCell id="25" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="24" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="780" as="targetPoint"/></mxGeometry></mxCell><mxCell id="26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.571;entryPerimeter=0;" edge="1" parent="1" source="18" target="16"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="27" value="&lt;u&gt;Callback upon POST success&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;br&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;- Check if protected (not yours etc)&lt;/div&gt;&lt;div&gt;- Call select on the alarm in question, deselecting previous alarms&lt;/div&gt;&lt;div&gt;- Check if already assigned (in case, return immediately)&lt;/div&gt;&lt;div&gt;- Remove previous click listeners&lt;/div&gt;&lt;div&gt;- Clone DOM object and remove old version&lt;/div&gt;&lt;div&gt;- Update alarm with new DOM object&lt;/div&gt;&lt;div&gt;- Check for &lt;i&gt;finished&lt;/i&gt;&amp;nbsp;state and add icon if necessary&lt;/div&gt;&lt;div&gt;- Call select on self, to update list with new DOM object&lt;/div&gt;&lt;div&gt;- Add click listener to trigger &lt;b&gt;Alarms.gui&lt;/b&gt;.&lt;i&gt;selectMyAlarm(alarmId)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- Remove clock icon if it was set&lt;/div&gt;&lt;div&gt;- Update assignment label on the DOM object&lt;/div&gt;&lt;div&gt;- Prepend to &lt;i&gt;Assigned to me&lt;/i&gt;&amp;nbsp;list&lt;/div&gt;&lt;div&gt;- Reset alarm count&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="530" width="450" height="220" as="geometry"/></mxCell><mxCell id="28" value="Populate Alarm Details" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="780" width="120" height="40" as="geometry"/></mxCell><mxCell id="29" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;entryX=0.5;entryY=0;" edge="1" source="28" parent="1" target="33"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="880" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.091;entryPerimeter=0;" edge="1" parent="1" source="24" target="27"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="31" value="&lt;u&gt;Called from &lt;i&gt;moveToAssigned()&lt;/i&gt;&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- a =&amp;nbsp;getAlarm(alarmIndex)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- &lt;b&gt;Patient&lt;/b&gt;&lt;i&gt;.generatePatientContainer() &amp;nbsp; &amp;nbsp;// Creates the div container&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&amp;nbsp; &lt;/i&gt;- Create the DOM container&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Bind &lt;i&gt;sameAddressCheckbox&lt;/i&gt;&amp;nbsp;click listener&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Bind auto client side cache of occurrenceAddress&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Bind &lt;i&gt;patientSearch&lt;/i&gt;&amp;nbsp;click listener&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Bind &lt;i&gt;verifyPatientLocation&lt;/i&gt;&amp;nbsp;click listener and callback function&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="780" width="450" height="130" as="geometry"/></mxCell><mxCell id="32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;" edge="1" parent="1" source="28"><mxGeometry relative="1" as="geometry"><mxPoint x="160" y="800" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="33" value="Populate Callee From Alarm" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="870" width="120" height="40" as="geometry"/></mxCell><mxCell id="34" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;entryX=0.5;entryY=0;" edge="1" source="33" parent="1" target="35"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="1100" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="35" value="Retrieve patients by address" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="960" width="120" height="40" as="geometry"/></mxCell><mxCell id="44" value="Populate Patient if already set" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="1145" width="120" height="40" as="geometry"/></mxCell><mxCell id="45" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;entryX=0.5;entryY=0;" edge="1" source="44" parent="1" target="46"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="1210" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="46" value="Populate Assessment data" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="1310" width="120" height="40" as="geometry"/></mxCell><mxCell id="47" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;" edge="1" source="46" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="1450" as="targetPoint"/></mxGeometry></mxCell><mxCell id="49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;red;endArrow=open;endFill=1;strokeWidth=1;strokeColor=#FF0800;shadow=0;" edge="1" parent="1" source="35" target="44"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="50" value="&lt;u&gt;Continuation from &lt;i&gt;populateAlarmDetails(alarmIndex)&lt;/i&gt;&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Patient&lt;/b&gt;&lt;i&gt;.retrievePatientsByAddress(alarmIndex)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;-&lt;/i&gt;&amp;nbsp;POST request to &lt;i&gt;prospectPatient()&lt;/i&gt;&amp;nbsp;endpoint&lt;/div&gt;&lt;div&gt;- On succes:&lt;/div&gt;&lt;div&gt;&amp;nbsp; - &lt;i&gt;generateProspectPatients(patientList)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; - Build patient dropdown selector list&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; - Set active patient to top if patient already set&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; - Bind click listener to dropdown triggering &lt;b&gt;Patient&lt;/b&gt;&lt;i&gt;.populatePatient(pat)&lt;/i&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="960" width="450" height="130" as="geometry"/></mxCell><mxCell id="54" value="&lt;u&gt;Continuation from &lt;i&gt;populateAlarmDetails(alarmIndex)&lt;/i&gt;&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Patient&lt;/b&gt;&lt;i&gt;.populatePatient(patient)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- a = &lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.getActiveAlarm()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- &lt;/i&gt;Populate fields with data from patient&lt;/div&gt;&lt;div&gt;- &lt;b&gt;Assessment&lt;/b&gt;.&lt;i&gt;loadPatientSensor(patient.id)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- Click &lt;i&gt;sameAddressCheckbox&lt;/i&gt;&amp;nbsp;if occurrenceAddress == patient address&lt;/div&gt;&lt;div&gt;- &lt;i&gt;populatePastAlarmsFromPatient()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- &lt;i&gt;setPatientOnAlarm(a.id, patient)&lt;/i&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; // Persist the patient to database&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="1142" width="450" height="138" as="geometry"/></mxCell><mxCell id="57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.154;entryPerimeter=0;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="35" target="50"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="44"><mxGeometry relative="1" as="geometry"><mxPoint x="160" y="1165" as="targetPoint"/></mxGeometry></mxCell><mxCell id="62" value="&lt;u&gt;Continuation from &lt;i&gt;populateAlarmDetails(alarmIndex)&lt;/i&gt;&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Assessment&lt;/b&gt;&lt;i&gt;.populateDOMfromAssessment()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- &lt;b&gt;Assessment&lt;/b&gt;&lt;i&gt;.reset()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- a = &lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.getActiveAlarm().data.assessment&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- currentAssessment = &lt;/i&gt;new AssessmentInfo(a)&lt;/div&gt;&lt;div&gt;- &lt;i&gt;updateDOM()&lt;/i&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="1310" width="450" height="110" as="geometry"/></mxCell><mxCell id="64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.182;entryPerimeter=0;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="46" target="62"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="65" value="Open Map" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="1450" width="120" height="40" as="geometry"/></mxCell><mxCell id="66" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;shadow=0;entryX=0.5;entryY=0;" edge="1" source="65" parent="1" target="73"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="1530" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="67" value="&lt;u&gt;User triggered&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;br&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;showMap()&lt;/i&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Triggered from 'View map' button bound in application init&lt;/div&gt;&lt;div&gt;- if FIRST_RUN then load and render the Google Maps container&lt;/div&gt;&lt;div&gt;- &lt;b&gt;MapView&lt;/b&gt;.&lt;i&gt;getAllCurrentPositions()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&amp;nbsp; &lt;/i&gt;- &lt;i&gt;updateFieldOperatorMarkers()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&amp;nbsp; - updateSidebar()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- &lt;/i&gt;activate auto refresh timer&lt;/div&gt;&lt;div&gt;- &lt;b&gt;MapView&lt;/b&gt;&lt;i&gt;.getAlarmLocations(&lt;/i&gt;&lt;b&gt;Alarms&lt;/b&gt;.&lt;i&gt;getActiveAlarm()) &lt;font color=&quot;#666666&quot;&gt;// If active = null, all alarms will be displayed, if active != null, Single alarm assignment mode&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&amp;nbsp; - updateAlarmMarkers()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="1450" width="450" height="170" as="geometry"/></mxCell><mxCell id="68" value="Asssign alarm to Mobile Caretaker" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="1660" width="120" height="40" as="geometry"/></mxCell><mxCell id="69" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;shadow=0;entryX=0.5;entryY=0;" edge="1" source="68" parent="1" target="87"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="1800" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="70" value="&lt;u&gt;User triggered&lt;/u&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Actions&lt;/b&gt;&lt;i&gt;.saveAndFollowup(payload)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- a = &lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.getActiveAlarm()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- updatedAlarm = &lt;b&gt;Actions&lt;/b&gt;.&lt;i&gt;getUpdatedAlarmFromPage()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- Check if there is an active alarm, return with alert immediately if not&lt;/div&gt;&lt;div&gt;- Check if the alarm has no patient set, return with alert immediately if not&lt;/div&gt;&lt;div&gt;- Check if the alarm is protected, return with alert immediately if not&lt;/div&gt;&lt;div&gt;- IF payload and payload.type === 'mobileCareTaker'&lt;/div&gt;&lt;div&gt;&amp;nbsp; - &lt;i&gt;updatedAlarm.mobileCareTaker = payload.id&lt;/i&gt;&lt;/div&gt;&lt;div&gt;POST &lt;i&gt;saveAndFollowupCase()&lt;/i&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="1660" width="450" height="160" as="geometry"/></mxCell><mxCell id="73" value="Assign or&amp;nbsp;&lt;div&gt;close map?&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-20" y="1555" width="130" height="55" as="geometry"/></mxCell><mxCell id="74" value="Close" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;entryX=1;entryY=0.5;" edge="1" source="73" parent="1" target="76"><mxGeometry x="-70" y="1575" as="geometry"><mxPoint x="-70" y="1575" as="targetPoint"/><mxPoint as="offset"/><Array as="points"/></mxGeometry></mxCell><mxCell id="75" value="Assign" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;entryX=0.5;entryY=0;" edge="1" source="73" parent="1" target="68"><mxGeometry as="geometry"><mxPoint x="45" y="1630" as="targetPoint"/><mxPoint x="15" y="-17" as="offset"/><Array as="points"/></mxGeometry></mxCell><mxCell id="76" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-100" y="1568" width="30" height="30" as="geometry"/></mxCell><mxCell id="83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=1;entryY=0.5;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="76" target="76"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.125;entryPerimeter=0;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="68" target="70"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.118;entryPerimeter=0;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="65" target="67"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;entryX=0;entryY=0.5;shadow=0;endArrow=open;endFill=1;strokeColor=#FF0000;strokeWidth=1;" edge="1" parent="1" source="73" target="65"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="-50" y="1583"/><mxPoint x="-50" y="1470"/></Array></mxGeometry></mxCell><mxCell id="87" value="Assign success" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="1840" width="120" height="40" as="geometry"/></mxCell><mxCell id="88" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;shadow=0;" edge="1" source="87" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="2140" as="targetPoint"/></mxGeometry></mxCell><mxCell id="89" value="&lt;u&gt;Callback from &lt;i&gt;saveAndFollowupCase()&lt;/i&gt;&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.getActiveAlarm().data = callback.data&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Alarms.gui&lt;/b&gt;&lt;i&gt;.moveToFollowupList()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- &lt;i&gt;activeAlarm.moveToFollowUp()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Check if protected, if so return alert immediately&lt;/div&gt;&lt;div&gt;&amp;nbsp; - If mobileCareTaker is set, update assigned to badge&lt;/div&gt;&lt;div&gt;&amp;nbsp; - If alarm is already in followup, just return now since now change is needed&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Remove click listeners&lt;/div&gt;&lt;div&gt;&amp;nbsp; - call &lt;i&gt;select()&lt;/i&gt;&amp;nbsp;on self to gain active status&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Clone DOM object&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Remove old DOM reference&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Update alarm with new DOM object&lt;/div&gt;&lt;div&gt;&amp;nbsp; - &lt;i&gt;activeAlarm&lt;/i&gt;.&lt;i&gt;state = &lt;/i&gt;'followup'&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Bind click listener triggering &lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.&lt;/i&gt;&lt;b&gt;gui&lt;/b&gt;&lt;i&gt;.selectFollowupAlarm()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Append DOM object to followup list&lt;/div&gt;&lt;div&gt;&amp;nbsp; - &lt;b&gt;Alarms.gui.&lt;/b&gt;&lt;i&gt;resetAlarmCount()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- activeAlarm.deselect()&lt;/i&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="1840" width="450" height="260" as="geometry"/></mxCell><mxCell id="90" value="Select Followup Alarm" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="2140" width="120" height="40" as="geometry"/></mxCell><mxCell id="91" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;shadow=0;" edge="1" source="90" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="2320" as="targetPoint"/></mxGeometry></mxCell><mxCell id="92" value="&lt;u&gt;User triggered&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;br&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Alarms.gui&lt;/b&gt;&lt;i&gt;.selectFollowUpAlarm(alarmIndex)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- &lt;/i&gt;a = &lt;i&gt;getAlarm(alarmIndex)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- active = &lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.getActiveAlarm()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- a.select() &lt;/i&gt;if activeAlarm != a, else &lt;i&gt;a.deselect()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- a.update(callback)&lt;/div&gt;&lt;div&gt;&amp;nbsp; - Remove recurring icon if present&lt;/div&gt;&lt;div&gt;&amp;nbsp; - &lt;b&gt;Alarms.gui&lt;/b&gt;&lt;i&gt;.populateAlarmDetails(a.id)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&amp;nbsp; - &lt;/i&gt;Show notes log div&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="2140" width="450" height="150" as="geometry"/></mxCell><mxCell id="95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.133;entryPerimeter=0;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="90" target="92"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.077;entryPerimeter=0;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="87" target="89"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="97" value="Close case" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="2320" width="120" height="40" as="geometry"/></mxCell><mxCell id="98" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;shadow=0;entryX=0.5;entryY=0;" edge="1" source="97" parent="1" target="101"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="2420" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="99" value="&lt;u&gt;User triggered&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;br&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Actions&lt;/b&gt;&lt;i&gt;.closeCaseAtClosing()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- a = &lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.getActiveAlarm()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- If no alarm, return an alert immediately&lt;/div&gt;&lt;div&gt;- If alarm is protected (not yours e.g) return an alert immediately&lt;/div&gt;&lt;div&gt;- Check if alarm is assigned to a mobile caretaker&lt;/div&gt;&lt;div&gt;&amp;nbsp; - If yes, request confirmation if alarm has not been marked as finished yet&lt;/div&gt;&lt;div&gt;&amp;nbsp; - If no, &lt;i&gt;closeCase()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;- closeCase()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&amp;nbsp; &lt;/i&gt;- POST &lt;i&gt;closeCase(alarm)&lt;/i&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="2320" width="450" height="180" as="geometry"/></mxCell><mxCell id="100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.111;entryPerimeter=0;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="97" target="99"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="101" value="Remove Alarm" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffffc0;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="-15" y="2520" width="120" height="40" as="geometry"/></mxCell><mxCell id="102" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;shadow=0;" edge="1" source="101" parent="1" target="103"><mxGeometry relative="1" as="geometry"><mxPoint x="45" y="2620" as="targetPoint"/></mxGeometry></mxCell><mxCell id="103" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1"><mxGeometry x="30" y="2605" width="30" height="30" as="geometry"/></mxCell><mxCell id="104" value="&lt;u&gt;Success callback from &lt;i&gt;closeCase(alarm)&lt;/i&gt;&lt;/u&gt;&lt;div&gt;&lt;u&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/u&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Alarms&lt;/b&gt;&lt;i&gt;.removeAlarm(alarm)&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- alarm.deselect()&lt;/div&gt;&lt;div&gt;- if DOM object rendered, alarm.DOM.remove()&lt;/div&gt;&lt;div&gt;- Remove alarm from client side cache&lt;/div&gt;&lt;div&gt;- Sort client side alarm cache by arrival time&lt;/div&gt;&lt;div&gt;- &lt;b&gt;Alarms.gui&lt;/b&gt;&lt;i&gt;.clearUpData()&lt;/i&gt;&lt;/div&gt;&lt;div&gt;- &lt;b&gt;Alarms.gui&lt;/b&gt;&lt;i&gt;.resetAlarmCount()&lt;/i&gt;&lt;/div&gt;" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;strokeColor=#000000;" vertex="1" parent="1"><mxGeometry x="160" y="2520" width="450" height="130" as="geometry"/></mxCell><mxCell id="105" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.154;entryPerimeter=0;shadow=0;endArrow=open;endFill=1;strokeColor=#000000;strokeWidth=1;" edge="1" parent="1" source="101" target="104"><mxGeometry relative="1" as="geometry"/></mxCell></root></mxGraphModel>